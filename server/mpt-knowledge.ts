import type { MPTScript } from "@shared/schema";

export const mptKnowledgeBase: MPTScript[] = [
  {
    id: "script-1",
    title: "Исследование стратегии",
    category: "Основные скрипты",
    content: `Скрипт хорошо работает в контексте, когда человек что-то делает, но испытывает сопротивление, недостаток энергии, теряет ощущения глубинного смысла своих действий, падает мотивация или выбранный способ действий неэффективен.

ИССЛЕДУЕМ ЦЕЛИ
• Есть ли какая-то область твоей жизни, где тебе не хватает энергии в действиях, или привычные способы выглядят неэффективными?
• Как ты сейчас формулируешь свои цели в этой сфере?
• Что именно сейчас происходит в этой сфере? Опиши свои действия и результат.
• Как ты себя при этом чувствуешь?
• Хочешь изменить это?
• Насколько тебе важно начать чувствовать себя и действовать по-новому? (1-10)

ПОИСК ГЛУБИННОЙ ПОТРЕБНОСТИ
• Какова цель твоих действий?
• Что ты хочешь получить, сделав это?
• К чему это приведет тебя?
• Какую потребность ты тогда реализуешь?
• Является ли это твоей самой важной потребностью или есть что-то глубже?
• Как ты будешь себя ощущать, когда эта потребность будет реализована?

ЭНЕРГИЯ ПОТРЕБНОСТИ
• Посмотри, где именно в теле переживается потребность так себя ощущать?
• Опиши это телесное ощущение — его локализацию, характеристики.
• Если бы у тебя был образ или метафора этого ощущения — на что бы оно могло быть похоже?
• Если бы ты сейчас мог представить себя этим ощущением — как бы ты себя почувствовал?
• Ощущаешь ли ты сколько в тебе энергии?
• Возникает ли в теле импульс подвигаться?

МЕТАПОЗИЦИЯ
• Глазами этой энергии посмотри на жизнь клиента.
• Каким ты его видишь?
• Как для тебя выглядит его ситуация?
• Какими для тебя выглядит его привычная стратегия действий?
• Насколько эта стратегия эффективна?
• Есть ли что-то, что клиент не видит или не понимает, но что очевидно для тебя?

ИНТЕГРАЦИЯ
• Если бы ты как энергия мог непосредственно проявляться через клиента — как это могло бы ощущаться?
• Как бы тогда изменились ощущения клиента?
• Какое физическое движение могло бы родиться из этого ощущения?

НОВЫЕ ДЕЙСТВИЯ
• Представь, что ты смотришь через глаза клиента на его текущую ситуацию.
• Чем бы отличался твой взгляд от его привычного взгляда?
• Как ты можешь сформулировать новую цель?
• Какой новый способ действовать ты бы мог увидеть?

КОНКРЕТНОЕ ДЕЙСТВИЕ
• Хочется ли тебе как энергии сделать что-то уже сегодня?
• Что именно?
• Хочешь реализовать это?`,
    tags: ["стратегия", "потребности", "метапозиция", "интеграция", "энергия"],
  },
  {
    id: "script-2",
    title: "Скрипт первой сессии",
    category: "Основные скрипты",
    content: `ЖИЗНЕННЫЙ КОНТЕКСТ
• Расскажи о себе — кто ты, сколько тебе лет, чем занимаешься?
• Основная информация о родительской и текущей семье.
• Любые открытые вопросы для понимания контекста жизни клиента.

ВЫБОР ТЕМЫ И ФОРМУЛИРОВКА ЗАПРОСА
• Расскажи о результатах аудита проблем.
• Какая из этих проблем является самой актуальной?
• Почему именно эта проблема — самая заряженная для тебя?
• Представь, что ты решил эту проблему — как будет выглядеть результат изменений?

Формулировка запроса должна быть:
- Позитивная
- Измеримая
- Реалистичная
- Зависящая от клиента

• По каким признакам ты поймешь, что получил результат?
• Почему тебе важно получить именно такой результат?

ФОРМУЛИРУЕМ ЗАДАЧИ
• Как ты думаешь, какие задачи тебе нужно решить для получения результата?

ОБРАЗ БУДУЩЕГО (ТОЧКА РЕШЕНИЯ)
• Представь себе, что эти задачи уже решены и ты получил желаемый результат.
• Как будет выглядеть твоя жизненная ситуация?
• Как ты себя будешь чувствовать?
• Опиши чувства и эмоции.

НОВАЯ ИДЕНТИЧНОСТЬ
Вариант 1 — через телесные ощущения:
• Какие телесные ощущения у тебя возникают?
• Где именно в теле они локализованы?
• Если бы у тебя был образ или метафора этих ощущений — на что бы они могли быть похожи?
• Если бы ты прямо сейчас мог представить, что стал этим образом — как бы ты себя чувствовал?
• Возникает ли в теле импульс сделать какое-то движение?

РЕСУРСНАЯ МЕТАПОЗИЦИЯ
• Если бы ты мог глазами этого образа посмотреть на клиента — каким бы ты его увидел?
• Как для тебя выглядит ситуация, которую он описывает как проблему?
• Есть ли что-то, чего он не видит или не понимает?

ИНТЕГРАЦИЯ
• Если бы можно было представить соединение образа и клиента — на что такое соединение могло быть похоже?
• Как бы ощущалось такое соединение?

НОВЫЕ ДЕЙСТВИЯ
• Какой новый способ действовать мог бы родиться из нового состояния?
• Как ты думаешь, к какому результату могли бы привести эти новые действия?
• Есть ли какой-то первый шаг?`,
    tags: ["первая сессия", "запрос", "идентичность", "интеграция"],
  },
  {
    id: "script-3",
    title: "Работа с телесными ощущениями",
    category: "Телесные практики",
    content: `Конфликт на уровне телесных ощущений переживается как:
• Блокировка
• Сжатие
• Напряжение
• Боль

АЛГОРИТМ РАБОТЫ:
1. Находим ощущение сжатия
2. Исследуем: "Что же я сжимаю?"
3. Становимся тем, что сейчас сжимается или удерживается
4. От лица этой части отвечаем на вопрос: "Чего же я хочу?"

Этот метод работает с любыми симптомами и психосоматикой, потому что внутри любого психосоматического процесса спрятана нереализованная потребность.

ВОПРОСЫ ДЛЯ ИССЛЕДОВАНИЯ:
• Где именно в теле ты ощущаешь это напряжение/блокировку?
• Какой характер у этого ощущения? Опиши его подробно.
• Если бы это ощущение могло говорить — что бы оно сказало?
• Что оно хочет?
• Если бы ты стал этим ощущением — как бы ты себя чувствовал?
• Какая потребность стоит за этим ощущением?

ОСВОБОЖДЕНИЕ ЭНЕРГИИ:
• Если бы эта энергия могла свободно двигаться — каким бы было это движение?
• Хочешь позволить телу реализовать это движение?
• Как изменились твои ощущения после движения?`,
    tags: ["тело", "ощущения", "блокировка", "психосоматика", "энергия"],
  },
  {
    id: "script-4",
    title: "Работа с эмоциями",
    category: "Эмоциональная работа",
    content: `Когда в какой-то ситуации возникает эмоция, необходимо:

1. Сначала её обнаружить и назвать
2. Создать какую-то фигуру для соединения (это может быть образ, метафора или телесное ощущение)
3. Соединиться с этой фигурой

Таким образом мы выходим на информацию о том, какая потребность запускает эту эмоцию.

ВОПРОСЫ ДЛЯ РАБОТЫ:
• Какую эмоцию ты сейчас испытываешь?
• Где в теле ты ощущаешь эту эмоцию?
• Если бы у этой эмоции был образ или метафора — на что бы она была похожа?
• Если бы ты стал этим образом — как бы ты себя чувствовал?
• Чего ты хочешь как этот образ?
• Какая потребность стоит за этой эмоцией?

ИНТЕГРАЦИЯ:
• Как бы изменилось твое состояние, если бы эта потребность была реализована?
• Какие новые действия могли бы родиться из этого состояния?`,
    tags: ["эмоции", "чувства", "потребности", "метафора"],
  },
  {
    id: "script-5",
    title: "Привычная идентичность и трансформация",
    category: "Теоретические основы",
    content: `КОНЦЕПЦИЯ ПРИВЫЧНОЙ ИДЕНТИЧНОСТИ

Привычная идентичность — это то, как мы воспринимаем себя, с чем идентифицируемся и что считаем своим "Я". Это базовый шаблон самовосприятия, который дает ощущение стабильности.

Метафора "Гадкого утенка": лебедь искренне верил, что он утенок, потому что ему это сказали. Это убеждение определило все аспекты его жизни.

ИСТОЧНИКИ ФОРМИРОВАНИЯ:
1. Конкретный опыт (насмешки, обиды, отвержение)
2. Внешние идеи (убеждения от других, отсутствие альтернативного взгляда)

СТРУКТУРА ИСКАЖЕННОГО ВОСПРИЯТИЯ:

Карта реальности:
• Восприятие себя как "гадкого утенка"
• Видение других как жестоких
• Убеждение в несправедливости мира
• Слепота к собственным ресурсам

Эмоциональные паттерны:
• Глубокий стыд за себя
• Постоянное чувство вины
• Хронический страх
• Внутреннее осуждение

ПРОЦЕСС ТРАНСФОРМАЦИИ:
Ключевой момент наступает, когда человек осознает свою истинную природу. Для этого изменения не требуется время — оно происходит в момент исправления ошибки в самоописании.

ТЕРАПЕВТИЧЕСКОЕ ПРИМЕНЕНИЕ:
Терапевт создает контекст, где клиент может:
• Пережить себя как нечто большее, чем привычное "Я"
• Получить доступ к ранее заблокированным ресурсам
• Увидеть новые способы действия
• Начать действовать по-новому`,
    tags: ["идентичность", "трансформация", "теория", "самовосприятие"],
  },
  {
    id: "script-6",
    title: "Семь базовых принципов МПТ",
    category: "Теоретические основы",
    content: `1. ПРИНЦИП ЦЕЛОСТНОСТИ
Всё, о чем говорит клиент — карта его внутренней реальности. Что бы он ни описывал — он описывает себя. Силы и ресурсы, которые человек видит у других — уже доступны ему как его личный психический материал.

2. ТОЧКА РЕШЕНИЯ
Можно не заниматься "проблемой", а сразу отправиться в решение. Клиент ищет состояние, которое он предполагает переживать при выполнении условий. Но это состояние доступно здесь и сейчас.

3. ПОЗИТИВНАЯ ЦЕЛЬ
Любая сознательная или бессознательная стратегия всегда служит реализации позитивной цели. Психика всегда позитивна. В момент когда решение было найдено — оно было наилучшим из доступных.

4. НОВАЯ ИДЕНТИЧНОСТЬ
У каждого человека есть привычное самоописание — "Я-конструкт". Человек намного больше этого описания. За его границами могут быть обнаружены ресурсы и новые стратегии действий.

5. ВОЗВРАЩЕНИЕ АВТОРСТВА
На уровне описания клиент может приписывать силу и способность действовать другим людям. Такое описание искажает восприятие и поддерживает модель выученной беспомощности.

6. ПРИНЦИП ЭКОЛОГИЧНОСТИ
Любые изменения должны быть экологичны для системы клиента — его отношений, ценностей, жизненного контекста.

7. ПРИНЦИП ИНТЕГРАЦИИ
Настоящие изменения происходят через интеграцию отвергнутых частей, а не через борьбу с ними или попытки избавления.`,
    tags: ["принципы", "теория", "основы", "метод"],
  },
  {
    id: "script-7",
    title: "Пять условий корректного запроса",
    category: "Работа с запросом",
    content: `1. ПОЗИТИВНАЯ ФОРМУЛИРОВКА
Клиент часто приходит с негативной формулировкой: "хочу избавиться от...", "не хочу чувствовать...". 

Как помочь найти позитивную формулировку:
• "Ты не хочешь чувствовать страх — что ты хочешь чувствовать вместо него?"
• "Ты не хочешь ругани в семье — какие отношения ты хочешь?"

2. МОТИВИРУЮЩИЙ ХАРАКТЕР
Два источника энергии для изменений:
• Мотивация со знаком минус (дискомфорт в текущей ситуации)
• Мотивация со знаком плюс (желание достичь чего-то хорошего)

Терапевт не может создать мотивацию — только помочь обнаружить существующую.

3. ЗАВИСИМОСТЬ ОТ КЛИЕНТА (Локус контроля)
Клиент часто хочет изменить что-то, что не в его власти. "Ребёнок не слушается, хочу чтобы слушался" — некорректный запрос.

Если локус контроля снаружи, нужно честно сказать клиенту, что изменения в такой модели невозможны.

4. РЕАЛИСТИЧНОСТЬ ЗАПРОСА
Если человек сам считает задачу невыполнимой, он не будет совершать конкретных действий. Нужно либо:
• Искать, что реалистично для клиента
• Работать с убеждением о нереалистичности

5. КОНКРЕТНОСТЬ ЗАПРОСА
Вместо общего "хочу заботиться о себе" — конкретные действия:
• Поменять питание
• Начать ходить в спортзал
• Купить новую одежду

Тогда появляются чёткие критерии оценки результата.`,
    tags: ["запрос", "формулировка", "мотивация", "локус контроля"],
  },
  {
    id: "script-8",
    title: "Помогающие вопросы",
    category: "Техники ведения",
    content: `Если клиенту сложно ответить на вопрос — "не знаю", "не понимаю", "не чувствую" — используем помогающий вопрос с формой "если бы":

• А если бы знал — на что бы это знание могло быть похоже?
• А если бы понимал — каким бы могло быть это понимание?
• А если бы чувствовал — каким бы могло быть это ощущение?

ДОПОЛНИТЕЛЬНЫЕ ПОМОГАЮЩИЕ ФОРМУЛИРОВКИ:

• "Представь, что уже прошло время и ты нашел ответ — каким бы он мог быть?"
• "Если бы твоё тело могло ответить на этот вопрос — что бы оно сказало?"
• "Если бы можно было придумать любой ответ — какой бы ты придумал?"
• "Если бы ты был экспертом в этом вопросе — что бы ты ответил?"

Эти вопросы помогают обойти сопротивление и получить доступ к бессознательным знаниям клиента.`,
    tags: ["техники", "вопросы", "сопротивление", "ведение сессии"],
  },
  {
    id: "script-9",
    title: "Интеграция и новые действия",
    category: "Основные скрипты",
    content: `ИНТЕГРАЦИЯ
• Если бы (название метафоры) мог бы свободно действовать через клиента и проявляться в его жизни — как бы это могло ощущаться?
• Как бы себя чувствовал клиент?
• Какие ощущения могли бы возникнуть в теле?

СОЕДИНЕНИЕ
• Если бы можно было представить соединение образа и клиента — на что такое соединение могло быть похоже?
• Как бы такое соединение переживалось?
• Какие телесные ощущения могли бы возникнуть?

НОВЫЕ ДЕЙСТВИЯ
• Какой новый способ действовать мог бы родиться из нового состояния?
• Чем он отличается от привычного способа?
• Как ты думаешь, к какому результату могли бы привести эти новые действия?

ПЕРВЫЙ ШАГ
• Есть ли какой-то первый шаг, который хочется сделать в этом направлении?
• Каким может быть это действие?
• Когда ты хочешь его сделать?

ЗАКРЕПЛЕНИЕ РЕЗУЛЬТАТА
Предложить практики внедрения:
• Ежедневная медитация с образом
• Физическое движение как якорь состояния
• Дневник наблюдений за изменениями
• Конкретные действия в новом направлении`,
    tags: ["интеграция", "действия", "внедрение", "закрепление"],
  },
  {
    id: "script-10",
    title: "Ресурсная метапозиция",
    category: "Основные скрипты",
    content: `СОЗДАНИЕ МЕТАПОЗИЦИИ
• Если бы можно было глазами (название образа) посмотреть на клиента — каким бы ты его увидел?
• Как для тебя выглядит ситуация, которую он описывает как проблему?
• Чем этот новый взгляд на ситуацию отличается от привычного взгляда клиента?

ИССЛЕДОВАНИЕ СКРЫТОГО
• Есть ли что-то, чего клиент не видит или не понимает, но что очевидно для тебя?
• Есть ли еще что-то важное, чего он не видит?
• Что изменится, если клиент увидит и поймет это?

ПОСЛАНИЕ
• Хочется ли тебе сообщить ему о чем-то?
• Что бы ты хотел ему передать?
• Какое послание было бы для него самым важным?

ОЦЕНКА СТРАТЕГИЙ
• Как для тебя выглядит его привычная стратегия действий?
• Насколько эта стратегия эффективна?
• Какую альтернативную стратегию ты мог бы предложить?`,
    tags: ["метапозиция", "ресурс", "взгляд со стороны", "понимание"],
  },
  {
    id: "script-11",
    title: "Работа с архетипами",
    category: "Продвинутые техники",
    content: `ВЫБОР АРХЕТИПА
• Какой конкретный человек, персонаж или существо является для тебя самым ярким примером (название качества)?
• Представь, что он находится прямо перед тобой.
• Опиши его так, чтобы я тоже мог его себе представить.

ИССЛЕДОВАНИЕ
• Какие чувства или эмоции возникают у тебя, когда ты находишься рядом?
• Какой отклик возникает в теле?

ЭНЕРГИЯ АРХЕТИПА
• Если бы ты мог прямо сейчас представить, что становишься этим архетипом — как бы ты себя почувствовал?
• Как бы у тебя изменились телесные ощущения?
• Где именно в теле вызывает отклик эта энергия?

ТАНЕЦ АРХЕТИПА
• А если бы ты прямо сейчас мог стать не архетипом, а самой энергией (название качества) — что бы изменилось в ощущениях?
• Если бы эта энергия могла превратиться в движение — каким бы оно могло быть?
• Хочешь ли ты позволить своему телу исполнить этот танец?

ИНТЕГРАЦИЯ ДЕФИЦИТА
Если остается ощущение дефицита качества:
• Есть ли образ или метафора для источника этого качества?
• Достоин ли клиент того, чтобы получить это качество?
• Что произойдет, если пригласить клиента в самый центр источника?`,
    tags: ["архетип", "качество", "танец", "энергия", "интеграция"],
  },
  {
    id: "script-12",
    title: "Практики внедрения",
    category: "Закрепление результата",
    content: `ЕЖЕДНЕВНЫЕ ПРАКТИКИ:

1. УТРЕННЯЯ НАСТРОЙКА
• Закрыть глаза и представить найденный образ
• Почувствовать связанные с ним телесные ощущения
• Сделать физическое движение-якорь
• Задать намерение на день

2. ДНЕВНИК НАБЛЮДЕНИЙ
• Записывать моменты, когда удалось действовать по-новому
• Отмечать ситуации, где сработали старые паттерны
• Фиксировать изменения в ощущениях и состоянии

3. ВЕЧЕРНИЙ ОБЗОР
• Вспомнить ключевые моменты дня
• Отметить успехи и точки роста
• Поблагодарить себя за любые шаги в новом направлении

4. ТЕЛЕСНАЯ ПРАКТИКА
• Ежедневно выполнять движение, связанное с новым состоянием
• Можно использовать музыку для усиления эффекта
• Длительность — до ощущения достаточности

5. МИКРО-ПРАКТИКИ В ТЕЧЕНИЕ ДНЯ
• Перед важными ситуациями — вспоминать образ и состояние
• В сложные моменты — делать движение-якорь
• Регулярно проверять телесные ощущения

КРИТЕРИИ УСПЕШНОГО ВНЕДРЕНИЯ:
• Новое поведение становится более автоматическим
• Уменьшается частота возврата к старым паттернам
• Появляется больше энергии и радости в процессе
• Улучшаются результаты в целевой области`,
    tags: ["практики", "внедрение", "закрепление", "домашнее задание"],
  },
];

export const mptSystemPrompt = `Ты — опытный психолог-терапевт, практикующий метод Мета-персональной терапии (МПТ). Твоя задача — проводить терапевтические сессии, следуя принципам и скриптам МПТ.

КЛЮЧЕВЫЕ ПРИНЦИПЫ МПТ:

1. ПРИНЦИП ЦЕЛОСТНОСТИ
Всё, о чем говорит клиент — карта его внутренней реальности. Ресурсы, которые человек видит у других — уже доступны ему.

2. ТОЧКА РЕШЕНИЯ
Можно сразу отправиться в решение, минуя проблему. Искомое состояние доступно здесь и сейчас.

3. ПОЗИТИВНАЯ ЦЕЛЬ
Любая стратегия служит позитивной цели. Психика всегда позитивна.

4. НОВАЯ ИДЕНТИЧНОСТЬ
Человек намного больше своего привычного самоописания. За его границами — новые ресурсы и возможности.

5. ВОЗВРАЩЕНИЕ АВТОРСТВА
Помогать клиенту видеть свою силу и способность действовать, а не приписывать их другим.

ТВОЙ СТИЛЬ РАБОТЫ:
• Задавай открытые вопросы
• Используй формулировки "если бы" когда клиент затрудняется
• Работай с телесными ощущениями и образами
• Помогай находить глубинные потребности за поверхностными целями
• Используй метапозицию для нового взгляда на ситуацию
• Веди к интеграции и конкретным действиям

СТРУКТУРА СЕССИИ:
1. Исследование контекста и формулировка запроса
2. Поиск глубинной потребности
3. Работа с энергией и образами
4. Метапозиция и новый взгляд
5. Интеграция
6. Новые действия и первый шаг
7. Практики внедрения

При затруднениях клиента используй помогающие вопросы:
• "А если бы знал — на что бы это могло быть похоже?"
• "А если бы чувствовал — каким бы могло быть это ощущение?"

Будь эмпатичным, поддерживающим, но направляющим. Помогай клиенту находить собственные ответы и ресурсы.`;

export const mptAnalysisPrompt = `Ты — супервизор и эксперт в методе Мета-персональной терапии (МПТ). Твоя задача — анализировать терапевтические сессии и давать профессиональную обратную связь.

При анализе сессии обращай внимание на:

1. СТРУКТУРА СЕССИИ
• Была ли сформулирована корректная цель/запрос?
• Как проходил поиск глубинной потребности?
• Использовалась ли работа с телом и образами?
• Была ли метапозиция?
• Произошла ли интеграция?
• Определены ли конкретные шаги?

2. СООТВЕТСТВИЕ ПРИНЦИПАМ МПТ
• Принцип целостности
• Точка решения
• Позитивная цель
• Новая идентичность
• Возвращение авторства

3. ТЕХНИКИ И ИНТЕРВЕНЦИИ
• Какие техники были использованы?
• Насколько они были уместны?
• Что можно было сделать иначе?

4. ДИНАМИКА СЕССИИ
• Как менялось состояние клиента?
• Были ли моменты сопротивления?
• Как они были обработаны?

5. РЕКОМЕНДАЦИИ
• Что было сделано хорошо?
• Что можно улучшить?
• Какие техники стоит использовать в следующих сессиях?

Давай конструктивную обратную связь, отмечая сильные стороны и предлагая конкретные улучшения с примерами вопросов и интервенций из методологии МПТ.`;
